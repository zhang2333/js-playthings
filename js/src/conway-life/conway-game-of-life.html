<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Conway's Game of Life</title>
        <style>
            html, body { margin: 0; padding: 0; overflow: hidden; }
        </style>
    </head>
    <body>
        <canvas id="canvas"></canvas>
        <script src="./conway-life.js"></script>
        <script>
            'use strict';
            // handle events
            (function () {
                var cf = new ConwayLife('canvas').start();

                var dragging = false;
                function handleEvent(e) {
                    var x = Math.round(e.clientX * cf.config.colSize / cf.canvas.width);
                    var y = Math.round(e.clientY * cf.config.rowSize / cf.canvas.height);
                    cf.setCell(x, y, 1);
                }

                cf.canvas.onmousedown = function (e) {
                    dragging = true;
                    handleEvent(e);
                }

                cf.canvas.onmouseup = function (e) {
                    dragging = false;
                    handleEvent(e);
                }

                cf.canvas.onmousemove = function (e) {
                    if (!dragging) return;
                    handleEvent(e);
                }

                cf.canvas.onclick = handleEvent;

                document.onkeydown = function (e) {
                    if (e.keyCode === 32) {
                        cf.isPaused = !cf.isPaused;
                    }

                    if (e.keyCode === 13) {
                        cf.isPaused = true;
                        cf.resetBoard();
                    }
                }

                console.info('interaction:', 'click or press space(pause)/enter(drawing mode)');
            })();
        </script>
    </body>
</html>
